<?xml version="1.0"?>
<launch>
  <arg name="paused" default="false"/>
  <arg name="gazebo_gui" default="true"/>
  <arg name="gazebo_debug" default="false"/>
  <arg name="use_urdf" default="true"/>

  <!-- ==================================================== -->
  <!-- Startup simulated world in Gazebo -->
  <!-- ==================================================== -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" default="$(find project_group852)/world/world.world"/>
    <arg name="paused" value="$(arg paused)"/>
    <arg name="gui" value="$(arg gazebo_gui)"/>
    <arg name="debug" value="$(arg gazebo_debug)"/>
  </include>


  <!-- ==================================================== -->
  <!-- Startup robot in Gazebo -->
  <!-- ==================================================== -->
  <!-- Load the URDF into the ROS Parameter Server -->
  <param name="robot_description"
    command="$(find xacro)/xacro --inorder '$(find project_group852)/urdf/j2n6s300_standalone.xacro'" />

  <!-- Run a python script to the send a service call to gazebo_ros to spawn a URDF robot -->
  <!-- For the 6DOF -->
  <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model" respawn="false" output="screen"
    args="-urdf -model j2n6s300 -param robot_description 
      -J j2n6s300_joint_1 0.0
      -J j2n6s300_joint_2 2.9
      -J j2n6s300_joint_3 1.3
      -J j2n6s300_joint_4 -2.07
      -J j2n6s300_joint_5 1.4
      -J j2n6s300_joint_6 0.0
      -J j2n6s300_joint_finger_1 1.0
      -J j2n6s300_joint_finger_2 1.0
      -J j2n6s300_joint_finger_3 1.0"/>

  <include file="$(find jaco_moveit_config)/launch/ros_controllers.launch"/>

  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <rosparam param="source_list">[/joint_states]</rosparam>
  </node>
  <node name="joint_state_desired_publisher" pkg="topic_tools" type="relay" args="joint_states joint_states_desired" />

  <!-- Publish robot states -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <!-- Publish joint states -->
  <!-- <node if="$(arg gazebo_gui)" name="joint_state_publisher" pkg="joint_state_publisher_gui" type="joint_state_publisher_gui" />
  <node unless="$(arg gazebo_gui)" name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" /> -->
  <include file="$(find jaco_moveit_config)/launch/move_group.launch">
    <arg name="allow_trajectory_execution" value="true"/>
    <arg name="moveit_controller_manager" value="simple" />
    <arg name="info" value="true"/>
    
  </include>

  <include file="$(find jaco_moveit_config)/launch/moveit_rviz.launch">
    <arg name="rviz_config" value="$(find jaco_moveit_config)/launch/moveit.rviz"/>

  </include>
  <!-- Launch rviz -->
  <!-- <node name="rviz" pkg="rviz" type="rviz" args="-d $(find project_group852)/rviz/robot.rviz" required="true" />
   -->

  <rosparam file="$(find jaco_moveit_config)/config/gazebo_controllers.yaml" />
</launch>